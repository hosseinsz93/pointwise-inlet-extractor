# Pointwise Inlet Extractor

Extract inlet boundary coordinates from Tecplot ASCII grid file.
First step is to import PLOT3D (*.x) file, generated by pointwise to Tecplot and write to a (*.dat) file in a block mode, so that it can be used as an input to this script.

## Tools

### `tecplot-inletGrid-extractor.m` - Standard Processor
**Best for:** Small to medium grids (<1GB files, <50M points)
- Simple, reliable processing
- Low memory overhead
- Sequential processing
- Suitable for files up to ~1GB

### `tecplot-inletGrid-extractor_parallel.m` - High-Performance Processor
**Best for:** Large to massive grids (>1GB files, >50M points)
- **Smart processing modes:**
  - Files ≤1GB: Parallel parsing with full grid processing
  - Files >1GB: Streaming approach with inlet-only extraction
- **Memory management:** Processes files in 50MB chunks
- **Performance:** 6x speedup on multi-core systems
- **Handles files up to 11GB+** successfully

## Requirements

### MATLAB Requirements
- MATLAB R2019b or later
- **For `tecplot-inletGrid-extractor_parallel.m`:**
  - Parallel Computing Toolbox
  - Minimum 8GB RAM recommended
  - Multi-core CPU for optimal performance

## Usage

### Standard Processing (Small Grid)
```matlab
% For grids <1GB
orientation = 1; % 0=Y-normal, 1=Z-normal
tecplot-inletGrid-extractor
```

### High-Performance Processing (Large Grid)
```matlab
% For grids >1GB with parallel processing
tecplot-inletGrid-extractor_parallel()
```

### HPC Cluster Processing
```bash
# On HPC cluster
module load matlab
matlab -batch "tecplot-inletGrid-extractor_parallel"
```

## File Size Guidelines

| Grid Size | File Size | Recommended Tool | Memory Needed |
|-----------|-----------|------------------|---------------|
| <10M points | <100MB | `tecplot-inletGrid-extractor.m` | <2GB |
| 10-50M points | 100MB-1GB | `tecplot-inletGrid-extractor.m` or `tecplot-inletGrid-extractor_parallel.m` | 2-8GB |
| 50-200M points | 1-10GB | `tecplot-inletGrid-extractor_parallel.m` | 4-16GB |
| >200M points | >10GB | `tecplot-inletGrid-extractor_parallel.m` (streaming) | <8GB |

## Output

Both scripts generate xyz.dat output files.

**Format:**
```dat
Nx,Ny,Nz
x1,y1,z1    % Section 1: Varying i coordinates
x2,y2,z2
...
x1,y1,z1    % Section 2: Varying j coordinates
x2,y2,z2
...
x1,y1,z1    % Section 3: Varying k coordinates
x2,y2,z2
...
```

## Coordinate Mapping

### Y-Normal (orientation = 0)
```
i → X direction, j → Y direction, k → Z direction
Output: [X, Y, Z]
```

### Z-Normal (orientation = 1)
```
i → Y direction, j → Z direction, k → X direction
Output: [Y, Z, X]
```

## Performance Test

**Test Case:** 206M Point Grid (1637×77×1637), 10.9GB file

| Tool | Processing Time | Memory Usage | Success |
|------|----------------|--------------|----------|
| `tecplot-inletGrid-extractor.m` | ❌ Out of Memory | >16GB | Failed |
| `tecplot-inletGrid-extractor_parallel.m` | ✅ 45 minutes | 8GB | Success |

## Author

**Hossein Seyedzadeh**
- Repository: https://github.com/hosseinsz93/pointwise-inlet-extractor
- Last updated: August 27, 2025

---

## Quick Start

**Small grids (<1GB):**
```matlab
tecplot-inletGrid-extractor
```

**Large grids (>1GB):**
```matlab
tecplot-inletGrid-extractor_parallel()
```